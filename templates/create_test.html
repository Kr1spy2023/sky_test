{% extends 'base.html' %}

{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ - Sky Test{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
<style>
    .dashboard {
        display: flex;
        min-height: 100vh;
    }

    .main-content {
        flex: 1;
        padding: 48px;
        max-width: 900px;
    }

    .header {
        margin-bottom: 40px;
    }

    .header h1 {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 8px;
        letter-spacing: -0.5px;
    }

    .header-subtitle {
        color: #666;
        font-size: 15px;
    }

    .form-card {
        background: white;
        border: 1px solid #e5e5e5;
        border-radius: 12px;
        padding: 32px;
    }

    .form-section {
        margin-bottom: 32px;
    }

    .form-section:last-child {
        margin-bottom: 0;
    }

    .section-title {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 16px;
        color: #1a1a1a;
    }

    .questions-list {
        margin-top: 24px;
    }

    .btn-add-question {
        width: 100%;
        margin-top: 16px;
        padding: 14px;
        justify-content: center;
    }

    .helper-text {
        font-size: 13px;
        color: #999;
        margin-top: 6px;
    }
</style>
{% endblock %}

{% block body_class %}dashboard{% endblock %}

{% block content %}
<div class="dashboard">
    {% include '_sidebar.html' %}

    <main class="main-content">
        <div class="header">
            <h1>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞</h1>
            <p class="header-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ—Å—Ç–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å—ã</p>
        </div>

        <form method="POST" class="form-card">
            <div class="form-section">
                <h2 class="section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>

                <div class="form-group">
                    <label for="test-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</label>
                    <input type="text" id="test-title" name="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è" required>
                </div>

                <div class="form-group">
                    <label for="test-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="test-description" name="description" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ –∏ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è"></textarea>
                    <p class="helper-text">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞–º –ø–æ–Ω—è—Ç—å, –æ —á—ë–º —Ç–µ—Å—Ç</p>
                </div>
            </div>

            <div class="form-section">
                <h2 class="section-title">–í–æ–ø—Ä–æ—Å—ã</h2>

                <div class="questions-list" id="questions-list">
                    <div class="question-card" data-question-index="0">
                        <div class="question-header">
                            <span class="question-number">–í–æ–ø—Ä–æ—Å 1</span>
                            <div class="question-actions">
                                <button type="button" class="icon-btn" onclick="moveQuestion(0, 'up')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö">‚Üë</button>
                                <button type="button" class="icon-btn" onclick="moveQuestion(0, 'down')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑">‚Üì</button>
                                <button type="button" class="icon-btn delete" onclick="removeQuestion(0)" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                            <input type="text" name="questions[0][text]" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞" required>
                        </div>

                        <input type="hidden" name="questions[0][type]" value="single">

                        <div class="form-group">
                            <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–æ—Ç–º–µ—Ç—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)</label>
                            <div class="answers-list" data-question="0">
                                <div class="answer-item">
                                    <input type="checkbox" class="answer-checkbox" name="questions[0][options][0][correct]" value="1">
                                    <input type="text" class="answer-input" name="questions[0][options][0][text]" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 1" required>
                                    <button type="button" class="answer-delete" onclick="removeAnswer(this)">‚úï</button>
                                </div>
                                <div class="answer-item">
                                    <input type="checkbox" class="answer-checkbox" name="questions[0][options][1][correct]" value="1">
                                    <input type="text" class="answer-input" name="questions[0][options][1][text]" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 2" required>
                                    <button type="button" class="answer-delete" onclick="removeAnswer(this)">‚úï</button>
                                </div>
                                <div class="answer-item">
                                    <input type="checkbox" class="answer-checkbox" name="questions[0][options][2][correct]" value="1">
                                    <input type="text" class="answer-input" name="questions[0][options][2][text]" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 3" required>
                                    <button type="button" class="answer-delete" onclick="removeAnswer(this)">‚úï</button>
                                </div>
                            </div>
                            <button type="button" class="btn-secondary" style="margin-top: 12px;" onclick="addAnswer(0)">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç
                            </button>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn-secondary btn-add-question" onclick="addQuestion()">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å
                </button>
            </div>

            <div class="form-actions">
                <button type="submit" name="action" value="publish" class="btn-primary">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç</button>
                <button type="submit" name="action" value="draft" class="btn-outline">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫</button>
                <a href="{{ url_for('views.dashboard') }}" class="btn-outline">–û—Ç–º–µ–Ω–∞</a>
            </div>
        </form>
    </main>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/create-test.js') }}"></script>
{% endblock %}
